[mysqld]
# ==========================================================================
server_id = 1
bind_address = 0.0.0.0
port = 3306

authentication_policy = mysql_native_password

default_time_zone=+08:00

character_set_server = utf8mb4
# character
init_connect = 'SET NAMES utf8mb4'
# order
collation_server = utf8mb4_0900_ai_ci


# ==========================================================================
# wait_timeout = 3600
# interactive_timeout = 3600
connect_timeout = 10
net_read_timeout = 30
net_write_timeout = 60


# ==========================================================================
read_only = OFF


# ==========================================================================
# log
# ==========================================================================
# error log 开启后不再向 stdout 打印
# log_error = error.log

# binlog
log_bin = master-bin.log
# BINLOG 保存时间，秒数
binlog_expire_logs_seconds = 864000

# 启用慢查询日志
slow_query_log = ON
# 慢查询检测时间
long_query_time = 20
# 慢查询文件
slow_query_log_file = slow.log


# ==========================================================================
# 数据包
# ==========================================================================

# 数据包最大大小, 单位: 字节, MAX=1073741824 1G, MIN=1024
max_allowed_packet = 64M


# ==========================================================================
# 连接
# ==========================================================================
# 允许的最大并发客户端数, MAX=100000, MIN=1, DEFAULT=151
max_connections = 2000
# 操作系统可用于 mysqld 的文件描述符数量, MAX=平台, MIN=0, DEFAULT=5000
open_files_limit = 5000
# 所有线程的打开表数, MAX=524288, MIN=1, max(open_files_limit - 10 - max_connections) / 2, 400), DEFAULT=4000
table_open_cache = 4000


# ==========================================================================
# InnoDB
# ==========================================================================
# 缓冲区 default=128M
innodb_buffer_pool_size = 256M
# 异步 I/O 子系统
# innodb_use_native_aio = NO
# 读线程数
innodb_read_io_threads = 16
# 写线程数
innodb_write_io_threads = 16
# 并行查询
innodb_parallel_read_threads = 16


# ==========================================================================
# 缓冲区, 连接查询, 索引, 读取缓冲, 排序缓冲, 临时表, 用户表
# ==========================================================================
# DEFAULT 256K
join_buffer_size = 2M
# DEFAULT 8M
key_buffer_size = 64M
# DEFAULT 128K
read_buffer_size = 1M
# DEFAULT 256K
sort_buffer_size = 2M
# DEFAULT 16M
tmp_table_size = 256M
# DEFAULT 16M
max_heap_table_size = 256M
