# 时间同步

## 1 Server

### 1.1 Service

```bash
sudo apt install ntp

sudo service ntp restart

sudo systemctl restart ntp
```

### 1.2 Setting

```text
/etc/ntp.conf
```

## 2 Client

### 2.1 Ubuntu

关闭本身的自动同步

```bash
sudo apt install ntpdate

sudo crontab -e

*/1 * * * * /usr/sbin/ntpdate HOST

@reboot sleep 120 ; /sbin/hwclock -w

0 */12 * * * /sbin/hwclock -w

```

### 2.2 Windows

```text
1 服务
管理员权限 cmd
net start w32time

Windows Time 服务设为自启动

2 注册表
以下均使用十进制
HKLM SYSTEM CurrentControlSet Services W32Time Config
    MinPollInterval 允许系统轮询的最小间隔 60

    MaxPollInterval 允许系统轮询的最大间隔 60

    UpdateInterval 相位校正调整之间的时钟周期数

    FrequencyCorrectRate 2

W32Time TimeProviders NtpClient
    SpecialPollInterval


```
