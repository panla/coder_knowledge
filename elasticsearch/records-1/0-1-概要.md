# 概要

[文档](https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html)

是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，提供/基于RESTful web接口

Elasticsearch是一个分布式文档存储。Elasticsearch不会将信息存储为列数据的行，而是存储已序列化为JSON文档的复杂数据结构。当集群中有多个Elasticsearch节点时，存储的文档将分布在集群中，并且可以从任何节点立即访问。

存储文档后，将在1秒钟之内几乎实时地对其进行索引和完全搜索。Elasticsearch使用称为倒排索引的数据结构，该结构支持非常快速的全文本搜索。反向索引列出了出现在任何文档中的每个唯一单词，并标识了每个单词出现的所有文档。

ElasticSearch 是面向文档，索引和搜索数据的最小单位是文档

## 搜索数据

[搜索数据](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-analyze.html)

Elasticsearch REST API支持结构化查询，全文查询和结合了两者的复杂查询。结构化查询类似于您可以在SQL中构造的查询类型。例如，您可以搜索索引中的gender和age字段，employee然后按hire_date字段对匹配项进行排序。全文查询会找到所有与查询字符串匹配的文档，并按相关性（它们与您的搜索字词的匹配程度）进行排序，并返回它们。

可以执行短语搜索，相似性搜索和前缀搜索，JSON样式查询语言，构造SQL样式的查询

## 面向文档

| 关系型数据库 | ES |
| :-: | :-: |
| database | 索引 |
| table | types |
| rows | documents |
| columns | fields |

## ES 逻辑设计

集群-索引-类型-文档-字段

### ES 索引

数据库级

索引存储了映射类型的字段 和其他设置

一个 ES 的索引是多个 Lucene 索引组成的

Elasticsearch索引实际上只是一个或多个物理碎片的逻辑分组，其中每个碎片实际上是一个独立的索引

通过在多个分片之间的索引中分配文档，并在多个节点之间分配这些分片

分片有两种类型：主数据库和副本数据库。索引中的每个文档都属于一个主分片。副本分片是主分片的副本

#### 倒排索引

在倒排索引里列出了所有文档中出现的每一个唯一单词并分别标识了每个单词在哪一个文档中

### ES 类型

类型中对于字段的定义称为映射

### ES 文档

一条数据

- 自我包含，一个文档同时包含字段和值
- 可以是层次型，文档包含文档
- 灵活结构

### ES 字段
