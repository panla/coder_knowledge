# PostgreSQL 字段类型

## 数字类型

PostgreSQL 没有无符号类型

| column | 字段 | 长度 | 范围 |
| :-: | :-: | :-: | :-: |
| int2 | 小范围整数 | 2字节 | -32768 至 32767 |
| int4 | 整数 | 4字节 | -2147483648 至 2147483647 |
| int8 | 大范围整数 | 8字节 | -9223372036854775808 至 9223372036854775807 |
| real | 6位十进制 | 4字节 | 6位十进制，可变精度，不精确 |
| double precision | 8字节 | 15位十进制，可变精度，不精确 |
| smallserial | int2 自增 | 2字节 | 1 至 32767 |
| serial | int4 自增 | 4字节 | 1 至 2147483647 |
| bigserial | int8 自增 | 8字节 | 1 至 9223372036854775807 |

## 时间，日期类型

| column | 字段 | 长度 |
| :-: | :-: | :-: |
| timestamp | 时间戳，包括日期时间，不带时区 | 8字节 |
| timestamp with time zone | 时间戳，包括日期时间，带时区 | 8字节 |
| timestamptz | 时间戳，包括日期时间，带时区 | 8字节 |
| date | 日期，年月日 | 4字节 |
| time | 时间，时分秒，不带时区 | 8字节 |
| time with time zone | 时间，时分秒，带时区 | 12字节 |
| interval | 时间间隔 | 16字节 |

没有 datetime 格式
timestamp 和 timestamptz 如何选择
没有自动更新时间戳功能

## 范围类型

| column | 范围 |
| :-: | :-: |
| int4range | int4的范围 |
| int8range | int8的范围 |
| tsrange | 不带时区的时间戳的范围 |
| tstzrange | 带时区的时间戳范围 |
| daterange | date 的范围 |

## 字符类型

| column | 描述 |
| :-: | :-: |
| varchar(n) | 变长 |
| char(n) | 变长，空白填充 |
| text | 变长，最大限制1GB |

## JSON/JSONB 类型

| column | 描述 |
| :-: | :-: |
| JSON | 以文本形式存储，查询时需要解析 |
| JSONB | 以二进制形式存储，存储时需要解析 |

```text
json 和 jsonb数据类型接受几乎完全相同的值集合作为输入。
主要的实际区别之一是效率。json数据类型存储输入文本的精准拷贝，处理函数必须在每次执行时必须重新解析该数据。
而jsonb数据被存储在一种分解好的二进制格式中，它在输入时要稍慢一些，因为需要做附加的转换。
但是 jsonb在处理时要快很多，因为不需要解析。

由于json类型存储的是输入文本的准确拷贝，其中可能会保留空格，键的顺序保留重复键值（处理函数会把最后的值当作有效值）。
相反，jsonb不保留空格、不保留对象键的顺序并且不保留重复的对象键。如果在输入中指定了重复的键，只有最后一个值会被保留。

jsonb也支持索引
josn 写快，读慢
josnb 写慢，读快
```

## 数组类型

```sql
create table example (
    name varchar(100),
    price price[],
    schedule text[][],
    squares int4[3][3]
)
```
