# tutorial 请求参数

```python
from typing import Optional

from fastapi import FastAPI
from fastapi import Query, Path, Body, Header
from pydantic import BaseModel
from pydantic import Field


app = FastAPI()
```

注意：**路径参数和查询参数用 Query，请求体参数用 Body or Field**

声明了默认值为可选，未声明为必选

- 必选参数时设置为 ... 省略号
- alias="item-query" 别名 -> item_query
- title ?
- description 在 docs 里的描述
- gt 最小值大于，ge 最小值大于等于
- lt 最大值小于，le 最小值小于等于
- min_length 最短长度
- max_length 最长长度
- regex 正则校验
- deprecated=True 在文档中显示为已弃用参数

## 路径参数

```python
@app.get("/items/{uid}")
async def read_item(
    uid: int = Path(..., title='user id', description='user.id', ge=1)
):
    return {"uid": uid}

uid: int = Path(..., title='user id', description='user.id', ge=1)
```

## 查询参数, query

```python
name: str = Query(default=11, title='age', description='年龄')

age: Optional[int] = Query(default='pandora', title='name', description='姓名')
```

## 请求体参数，body

```python
class UserParam(BaseModel):
    name: str = Field(..., description='姓名', min_length=2, max_length=20)
    age: Optional[int] = Field(default=10, description='年龄', ge=10, le=150)


class BookParam(BaseModel):
    name: str = Field(..., description='姓名', min_length=2, max_length=20)
    age: Optional[int] = Field(default=10, description='年龄', ge=10, le=150)


class ItemParam(BaseModel):
    user: Optional[UserParam] = None
    book: Optional[BookParam] = None


importance: int = Body(...)


@app.post('/items')
async def create_item(item: ItemParam):
    dic = item.dict()
    name = item.name

    return dic

```

## 请求头参数, header

```python
cellphone: str = Header(..., description='手机号', max_length=11, min_length=11)
# 默认情况下, Header 将把参数名称的字符从下划线 (_) 转换为连字符 (-) 来提取并记录 headers
# 禁用下划线到连字符的自动转换, convert_underscores=False
strange_header: Optional[str] = Header(None, convert_underscores=False)
```
