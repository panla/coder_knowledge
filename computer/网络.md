# 计算机网络

## TCP 握手，挥手

### 标志量

- SYN：请求同步标志，1 为有效
- ACK：应答标志，表示接收到所发的数据，1 为有效
- FIN：结束请求标志，1 为有效

- ack：应答，值是告诉对方下一次所发数据地址, 也是接收到的 seq + 1
- seq：值为所发数据地址

### 三次握手

```text
Client                  Server
    --> SYN=1, seq=x，(请求建立连接)
    <-- SYN=1, ACK=1, seq=y, ack=x+1(因为来的数据是 seq=x)，(针对客户端的 SYN 确认应答，并建立连接)
    --> ACK=1, seq=x+1, ack=y+1(因为来的数据是 seq=y)，(针对服务端的 SYN 的确认应答)
```

### 四次挥手

```text
Client                  Server
    --> FIN=1, seq=x，结束请求同步
    <-- ACK=1, seq=y, ack=x+1, (服务端接收到客户端结束的请求)
    <-- ACK=1, FIN=1, seq=z, ack=x+1，(服务端回复已经可以断开了，seq=z 中间数据传输，地址发生了变化)
    --> ACK=1, seq=x+1, ack=z+1，(客户端结束)
```

## 网络模型

```text
TCP/IP       五层网络模型
应用层          应用层          HTTP/FTP
传输层          传输层          TCP/UDP
网络层          网络层          负责两台主机通信，选择合适的路由将数据传递到目标主机

网络接口层      数据链路层       负责将网络层交下来的IP数据报文封装成帧，在链路的两个相邻接点传送帧
                物理层          确保数据可以在物理媒介上进行传输
```

| 七层网络模型 | 五层网络模型 | TCP/IP | 协议 | other |
| :-: | :-: | :-: | :-: | :-: |
| 应用层 | 应用层 | 应用层 | TELNET FTP SMTP HTTP |  |
| 表示层 | 应用层 | 应用层 |  |  |
| 会话层 | 应用层 | 应用层 |  |  |
| 运输层 | 运输层 | 运输层 | TCP UDP |  |
| 网络层 | 网络层 | 网际层 | ICMP |  |
| 数据链路层 | 数据链路层 | 网络接口层 |  |  |
| 物理层 | 物理层 | 网络接口层 |  |  |

## IP 地址分类

网络号 + 主机号

| 类别 | 网络号，主机号 | 地址范围 | 公网可用地址 | 私有地址 | 保留地址 | 其他地址 |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| A | `[0][网络号7位][主机号24位]` | `0.0.0.0` -- `126.*.*.*` | `1.*.*.*` -- `9.*.*.*` <br> `11.*.*.*` -- `126.*.*.*` | `10.*.*.*` |  | `0.0.0.0` <br> `127.0.0.1` |
| B | `[10][网络号14位][主机号16位]` | `128.*.*.*` -- `191.*.*.*` | `128.1.*.*` -- `172.15.*.*` <br> `172.32.*.*` -- `191.254.*.*` | `172.16.*.*` -- `172.31.*.*` | `128.0.*.*` <br> `191.255.*.*` |  |
| C | `[110][网络号21位][主机号8位]` | `192.*.*.*` -- `223.*.*.**` | `192.*.1.*` -- `223.*.254.*` | `192.168.*.*` | `192.0.0.*` <br> `223.255.255.*` |  |
| D | `[1110][主机号28位]` | `224.0.0.0` -- `239.255.255.255` |  |  |  |  |
| E | `[11110][主机号27位]` | `240.0.0.0 -- 247.255.255.255` |  |  |  |  |
